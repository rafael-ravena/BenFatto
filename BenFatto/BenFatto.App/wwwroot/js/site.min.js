function AddLoadingDisplay(n){$backdrop=$('<div class="loader-container"/>');n.append($backdrop);$loader=$('<div class="loader"/>');$backdrop.append($loader)}function ClearElementValidation(n){n.parent().find(".error-message").remove();n.removeClass("border-danger")}function AjaxPost(n,t,i,r){$.ajax({url:n,contentType:"application/json; charset=utf-8",accepts:"text/plain",type:"post",data:t,crossDomain:!0,success:i,error:r})}function BindSerializedDataToForm(n){$.each(n,function(n,t){var i=$('[name="'+n+'"]');i.val(t)})}function GetFormSerializedData(n){var i=n.serializeArray(),t={};return $.map(i,function(n){t[n.name]=n.value}),t}function GetDeleteWarning(){return $("#DeleteWarning").html()}function GetLoadingContent(){return $("#LoadingSign").html()}function ClearDetailModal(){$("#DetailModalFooter").addClass("d-none");$("#DetailModalBody").html(GetLoadingContent());$("#DetailModalTitle").html("")}function ClearDeleteModal(){$("#ConfirmDeleteModalBody").html(GetLoadingContent());$("#ConfirmDeleteModalTitle").html("");$("#ConfirmDelete").attr("href","");$("#ConfirmDelete").removeClass("d-none")}function DisplayErrorMessage(n){$(n).html($("#DeleteFail").html())}function ShowToarstrMessage(){var n=$("#ToastrType").html(),t=$("#ToastrMsg").html();n&&t&&toastr[n](t)}$(document).ready(function(){$('[data-behavior~="menu-toggle"]').on("click",function(){$("body").toggleClass("menu-expanded")});$('input[type="submit"]').on("click",function(n){n.preventDefault();n.stopPropagation();var t=$(this).closest("form");t.find("input,button,select").removeAttr("disabled");t.submit()});$('a[data-behavior~="display-modal"]').on("click",function(){ClearDetailModal();$("#DetailModalTitle").html($(this).attr("data-arg"));$("#DetailModalBody").load($(this).attr("href"),function(n,t){"error"==t&&(DisplayErrorMessage("#DetailModalBody"),$("#DetailModalFooter").removeClass("d-none"))})});$('[data-behavior="navigate-page"]').on("click",function(){if($("#page").val(parseInt($("#page").val())+parseInt($(this).attr("data-arg"))),parseInt($("#page").val())<0){$("#page").val(0);return}$("#page").closest("form").submit()});$('[data-behavior~="confirm-delete"]').on("click",function(n){n.preventDefault();n.stopPropagation();var t=$(this).attr("href");ClearDeleteModal();$("#ConfirmDeleteModalTitle").html($(this).attr("data-arg"));$("#ConfirmDeleteModal").modal("show");$("#ConfirmDeleteModalBody").load($($(this).attr("data-target")).attr("href"),function(n,i){"error"==i?(DisplayErrorMessage("#ConfirmDeleteModalBody"),$("#ConfirmDelete").addClass("d-none")):"success"==i&&($("#ConfirmDeleteModalBody").prepend(GetDeleteWarning()),$("#Action").addClass("d-none"),$("#ConfirmDelete").attr("href",t))})});$('[data-behavior~="clear-delete-modal"]').on("click",function(){ClearDeleteModal()});$('[data-behavior~="edit-element"]').on("click",function(){ClearDetailModal();$("#DetailModalTitle").html($(this).attr("data-arg"));var n=$(this).attr("href");$("#DetailModalBody").load($(this).attr("href"),function(t,i){"error"==i?(DisplayErrorMessage("#DetailModalBody"),$("#DetailModalFooter").removeClass("d-none")):"success"==i&&$("#EditElementForm").attr("action",n)})});$(".modal-content").on("change",'[id]:not([data-behavior~="search-object"])',function(n){n.stopPropagation();ClearElementValidation($(this));var t=$(this).closest("form"),i=t.attr("data-search-row"),r=JSON.stringify(GetFormSerializedData(t));AjaxPost(i,r,function(n){$("#OriginalLine").val(n)},function(n){toastr.warning(n.responseText,n.statusText)})});$(".modal-content").on("change",'[data-behavior~="search-object"]',function(n){var i;n.stopPropagation();ClearElementValidation($(this));var r=$(this).attr("data-search-object"),u=$('[name="ImportId"]').val(),t=$('[name="RowNumber"]').val(),f=$(this).val();""==t&&(t=0);i=JSON.stringify({ImportId:u,RowNumber:t,Row:f});AjaxPost(r,i,function(n){BindSerializedDataToForm(n)},function(n){toastr.warning(n.responseText,n.statusText)})});$(".modal-content").on("submit","form",function(n){var i=$(this).find("input,select"),r,t;for($(".error-message").remove(),$(i).removeClass("border-danger"),r=!0,t=0;t<i.length;t++)undefined!==$(i[t]).attr("data-required")&&""==$(i[t]).val()&&(r=!1,$(i[t]).addClass("border-danger"),$(i[t]).after('<b class="error-message text-danger">This field is required!<\/b>'));r?AddLoadingDisplay($(this)):(n.preventDefault(),n.stopPropagation())});$(".table").stickyTableHeaders();ShowToarstrMessage()});toastr.options={closeButton:!1,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-full-width",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"15000",extendedTimeOut:"15000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};